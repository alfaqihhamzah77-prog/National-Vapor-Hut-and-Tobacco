<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>نظام الموظف</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background:#f0f0f0; }
input, button { padding: 10px; margin:5px 0; width: 200px; }
.result { margin-top: 20px; font-size: 18px; }
</style>
</head>
<body>
<h2>نظام الموظف</h2>
<input type="text" id="cardId" placeholder="رقم البطاقة"><br>
<input type="number" id="amount" placeholder="المبلغ"><br>
<input type="password" id="pass" placeholder="كلمة السر"><br>

<button onclick="addPoints()">إضافة نقاط</button>
<button onclick="resetPoints()">تصريف النقاط</button>

<div class="result" id="result"></div>

<script>
const scriptUrl = 'https://script.google.com/macros/s/AKfycbyNAyrMBpk68FtcRl6WX_U4vth3HzMu4k-Bjv0VB6XLK6KZPn_J88sXRO1ORGUsSG0F/exec';

function addPoints() {
    const cardId = document.getElementById('cardId').value;
    const amount = document.getElementById('amount').value;
    const pass = document.getElementById('pass').value;
    if(!cardId || !amount || !pass) { alert('املأ جميع الحقول'); return; }

    fetch(`${scriptUrl}?action=add&cardId=${cardId}&amount=${amount}&pass=${pass}`)
    .then(response => response.json())
    .then(data => {
        if(data.error) {
            document.getElementById('result').innerHTML = data.error;
        } else {
            document.getElementById('result').innerHTML = `تم إضافة النقاط. النقاط الحالية: ${data.points}`;
        }
    });
}

function resetPoints() {
    const cardId = document.getElementById('cardId').value;
    const pass = document.getElementById('pass').value;
    if(!cardId || !pass) { alert('املأ جميع الحقول'); return; }

    fetch(`${scriptUrl}?action=reset&cardId=${cardId}&pass=${pass}`)
    .then(response => response.json())
    .then(data => {
        if(data.error) {
            document.getElementById('result').innerHTML = data.error;
        } else {
            document.getElementById('result').innerHTML = `تم تصفير النقاط. النقاط الحالية: ${data.points}`;
        }
    });
}
</script>
</body>
</html>
