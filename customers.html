<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>نقاط الزبون</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background:#f5f5f5; }
input, button { padding: 10px; margin:5px 0; width: 200px; }
.result { margin-top: 20px; font-size: 18px; }
</style>
</head>
<body>
<h2>تحقق من نقاطك</h2>
<input type="text" id="cardId" placeholder="أدخل رقم البطاقة">
<button onclick="checkPoints()">عرض النقاط</button>

<div class="result" id="result"></div>

<script>
const scriptUrl = 'https://script.google.com/macros/s/AKfycbyNAyrMBpk68FtcRl6WX_U4vth3HzMu4k-Bjv0VB6XLK6KZPn_J88sXRO1ORGUsSG0F/exec';

function checkPoints() {
    const cardId = document.getElementById('cardId').value;
    if(!cardId) { alert('أدخل رقم البطاقة'); return; }

    fetch(`${scriptUrl}?action=get&cardId=${cardId}`)
    .then(response => response.json())
    .then(data => {
        if(data.error) {
            document.getElementById('result').innerHTML = data.error;
        } else {
            document.getElementById('result').innerHTML = `النقاط: ${data.points} <br>آخر تحديث: ${data.lastUpdated}`;
        }
    })
    .catch(err => {
        document.getElementById('result').innerHTML = 'حدث خطأ. حاول مرة أخرى.';
        console.error(err);
    });
}
</script>
</body>
</html>
